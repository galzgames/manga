# ğŸ“¸ Guia: Upload de Capas com Firebase Storage

## Como as capas sÃ£o salvas

Quando vocÃª adiciona um mangÃ¡ com uma capa, o sistema:

1. **Se vocÃª selecionou um arquivo local:** 
   - O arquivo Ã© automaticamente comprimido (atÃ© 500px de largura)
   - Enviado para Firebase Storage
   - A URL da imagem Ã© salva no banco de dados

2. **Se vocÃª colou uma URL:**
   - A URL Ã© salva diretamente (sem upload)
   - Funciona se o site da URL permitir acesso externo

3. **Se nenhuma capa foi fornecida:**
   - Um Ã­cone de livro (ğŸ“š) Ã© exibido

---

## LocalizaÃ§Ã£o das Capas no Firebase

As capas sÃ£o salvas em: `gs://seu-projeto.appspot.com/capas/`

Estrutura de pastas:
```
capas/
â”œâ”€â”€ manga_1705700000000_123456789.jpg
â”œâ”€â”€ manga_1705700010000_987654321.jpg
â””â”€â”€ ...
```

---

## Limite de Armazenamento

**Firebase Storage oferece 5GB gratuitamente** no plano free. Isso significa:

- ğŸ“š ~5000 capas de mangÃ¡s (1MB mÃ©dia)
- ğŸ“– EspaÃ§o suficiente para uma coleÃ§Ã£o completa

Para gerenciar:
1. Acesse [Firebase Console](https://console.firebase.google.com/)
2. VÃ¡ para **Storage**
3. Veja o espaÃ§o usado em "Quota de armazenamento"

---

## OtimizaÃ§Ã£o AutomÃ¡tica

O sistema comprime as imagens automaticamente para:
- âœ… Economizar espaÃ§o
- âœ… Carregar mais rÃ¡pido
- âœ… Qualidade visual mantida (80% JPEG)

EspecificaÃ§Ãµes:
- Largura mÃ¡xima: 500px
- ProporÃ§Ã£o: Mantida
- Formato: JPEG 80% qualidade

---

## Problemas com Upload?

### "Erro ao fazer upload da capa"

**PossÃ­veis causas:**
1. âŒ Firebase Storage nÃ£o foi criado â†’ [Ver guia](./FIREBASE_SETUP.md#passo-6-configurar-firebase-storage)
2. âŒ Arquivo muito grande (>25MB)
3. âŒ ConexÃ£o instÃ¡vel
4. âŒ Regras de seguranÃ§a incorretas

**SoluÃ§Ã£o:**
- Tente novamente
- Se o erro persistir, use uma URL externa
- Verifique o console (F12) para detalhes

### "Capa nÃ£o aparece no site"

**PossÃ­veis causas:**
1. âŒ URL expirou
2. âŒ CORS bloqueado
3. âŒ Arquivo deletado

**SoluÃ§Ã£o:**
- Atualize a capa
- Tente outra imagem

---

## Deletar Capas

Quando vocÃª **deleta um mangÃ¡:**
- âœ… A capa Ã© removida automaticamente do Storage
- âœ… EspaÃ§o Ã© liberado

---

## Gerenciar Capas Manualmente

Se precisar deletar capas manualmente:

1. Firebase Console â†’ Storage
2. Selecione a pasta `capas/`
3. Selecione a capa que quer deletar
4. Clique no Ã­cone de lixeira (ğŸ—‘ï¸)

---

## Dicas

- ğŸ’¡ Use URLs de sites confiÃ¡veis para imagens externas
- ğŸ’¡ Nomes de arquivo com nÃºmeros aleatÃ³rios evitam conflitos
- ğŸ’¡ Mantenha a pasta `capas/` organizada deletando antigos

---

**PrÃ³xima etapa:** [Voltar ao guia principal](./FIREBASE_SETUP.md)
